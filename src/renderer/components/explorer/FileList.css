.file-list {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  outline: none;
}

.file-list-header {
  display: flex;
  align-items: center;
  height: 28px;
  background-color: var(--bg-secondary);
  border-bottom: 1px solid var(--border-primary);
  font-size: var(--font-size-sm);
  font-weight: 500;
  color: var(--text-secondary);
  user-select: none;
  min-width: 0; /* Allow shrinking in flex container */
}

.file-list-header .file-cell {
  cursor: pointer;
  padding: 0 var(--spacing-sm);
  position: relative;
  flex-shrink: 0;
}

.file-list-header .file-cell:hover {
  background-color: var(--bg-hover);
}

/* Column resize handle */
.column-resize-handle {
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 6px;
  cursor: col-resize;
  background-color: transparent;
  z-index: 1;
}

.column-resize-handle:hover,
.file-list-header.resizing .column-resize-handle {
  background-color: var(--accent-color);
}

.file-list-header.resizing {
  cursor: col-resize;
  user-select: none;
}

.file-list-body {
  flex: 1;
  overflow: hidden;
}

.file-row {
  display: flex;
  align-items: center;
  height: 24px;
  cursor: default;
  user-select: none;
}

.file-row:hover {
  background-color: var(--row-hover);
}

.file-row.alt {
  background-color: var(--row-alt);
}

.file-row.alt:hover {
  background-color: var(--row-hover);
}

.file-row.selected {
  background-color: var(--row-selected);
  color: var(--text-inverse);
}

.file-row.selected:not(:focus-within) {
  background-color: var(--row-selected-unfocused);
  color: var(--text-primary);
}

.file-cell {
  display: flex;
  align-items: center;
  height: 100%;
  padding: 0 var(--spacing-sm);
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  font-size: var(--font-size-sm);
  flex-shrink: 0;
}

.file-cell.name {
  min-width: 100px;
  gap: var(--spacing-sm);
}

.file-cell.date {
  /* Width set by inline style */
}

.file-cell.type {
  /* Width set by inline style */
}

.file-cell.size {
  justify-content: flex-end;
}

.file-name {
  overflow: hidden;
  text-overflow: ellipsis;
}

.file-icon {
  flex-shrink: 0;
}

.file-icon.folder {
  color: var(--icon-color-folder);
}

.file-icon.image {
  color: var(--icon-color-image);
}

.file-icon.video {
  color: var(--icon-color-video);
}

.file-icon.audio {
  color: var(--icon-color-audio);
}

.file-icon.code {
  color: var(--icon-color-code);
}

.file-icon.archive {
  color: var(--icon-color-archive);
}

.file-icon.text {
  color: var(--icon-color-text);
}

.file-icon.default {
  color: var(--icon-color-default);
}

.sort-indicator {
  margin-left: var(--spacing-xs);
  font-size: 10px;
}

.file-list-loading,
.file-list-empty,
.file-list-error {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: var(--text-secondary);
  font-size: var(--font-size-md);
}

.file-list-error {
  color: var(--color-error);
}

.error-message {
  font-size: var(--font-size-sm);
  margin-top: var(--spacing-sm);
  color: var(--text-tertiary);
}

/* Marquee selection box */
.marquee-selection {
  position: absolute;
  border: 1px solid var(--accent-color);
  background-color: var(--accent-color-alpha);
  pointer-events: none;
  z-index: 100;
}

.file-list-body {
  position: relative;
}

/* Drag over folder state */
.file-row.drag-over {
  background-color: var(--accent-color-alpha);
  outline: 1px dashed var(--accent-color);
  outline-offset: -1px;
}

/* Dragging cursor - only show grab cursor when selected (draggable) */
.file-row.selected[draggable="true"] {
  cursor: grab;
}

.file-row.selected[draggable="true"]:active {
  cursor: grabbing;
}

/* Thumbnails view mode - details with larger icons/thumbnails */
.file-row.thumbnail-mode {
  display: flex;
  align-items: center;
  min-height: 72px;
}

.file-row.thumbnail-mode .file-cell.name {
  gap: var(--spacing-md);
}

.file-row.thumbnail-mode .thumbnail-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  background-color: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  overflow: hidden;
}

.file-row.thumbnail-mode .thumbnail-icon .file-thumbnail-img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

.file-row.thumbnail-mode .file-name {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex: 1;
  min-width: 0;
}

/* Icons view mode */
.view-icons .file-list-body {
  overflow: auto;
}

.file-icons-grid {
  display: grid;
  gap: var(--spacing-sm);
  padding: var(--spacing-md);
  align-content: flex-start;
}

.file-item-icon {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 80px;
  padding: var(--spacing-sm);
  border-radius: var(--radius-md);
  cursor: default;
  user-select: none;
}

.file-item-icon:hover {
  background-color: var(--row-hover);
}

.file-item-icon.selected {
  background-color: var(--row-selected);
}

.file-item-icon.selected:not(:focus-within) {
  background-color: var(--row-selected-unfocused);
}

.file-item-icon.drag-over {
  background-color: var(--accent-color-alpha);
  outline: 1px dashed var(--accent-color);
}

.file-item-icon-image {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  margin-bottom: var(--spacing-xs);
}

.file-item-icon-name {
  font-size: var(--font-size-sm);
  text-align: center;
  word-break: break-word;
  max-width: 100%;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Inline rename input */
.inline-rename-form {
  display: flex;
  flex: 1;
  min-width: 0;
}

.inline-rename-input {
  flex: 1;
  min-width: 0;
  padding: 0 var(--spacing-xs);
  font-size: var(--font-size-sm);
  font-family: inherit;
  background-color: var(--input-bg);
  border: 1px solid var(--accent-color);
  border-radius: var(--radius-sm);
  color: var(--text-primary);
  outline: none;
}

.inline-rename-input:focus {
  box-shadow: 0 0 0 1px var(--accent-color);
}

.file-row.editing .file-cell.name {
  padding-right: var(--spacing-xs);
}

.file-item-icon.editing .inline-rename-form {
  width: 100%;
}

.file-item-icon.editing .inline-rename-input {
  text-align: center;
}

/* Column context menu */
.column-context-menu {
  position: fixed;
  z-index: var(--z-dropdown);
  background-color: var(--menu-bg);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  min-width: 160px;
  padding: var(--spacing-xs);
}

.column-context-menu-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  width: 100%;
  padding: var(--spacing-sm) var(--spacing-md);
  border-radius: var(--radius-sm);
  color: var(--text-primary);
  font-size: var(--font-size-sm);
  text-align: left;
}

.column-context-menu-item:hover:not(:disabled) {
  background-color: var(--menu-hover);
}

.column-context-menu-item:disabled {
  color: var(--text-disabled);
  cursor: not-allowed;
}

.column-check {
  width: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--accent-color);
}

/* Thumbnail image styles */
.file-thumbnail-img {
  display: block;
  border-radius: var(--radius-sm);
  background-color: var(--bg-tertiary);
}

.file-thumbnail-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.6;
}

/* Ensure thumbnail container properly centers content */
.thumbnail-icon .file-thumbnail-img,
.file-item-icon-image .file-thumbnail-img {
  max-width: 100%;
  max-height: 100%;
}

/* Glass UI mode - use outline instead of fill for better visibility */
/* Use high-specificity selectors to ensure these override all other rules */
html[data-ui-style="glass"] .file-list,
[data-ui-style="glass"] .file-list {
  --row-hover: transparent !important;
  /* Note: --row-alt is NOT set to transparent here to preserve alternating row colors */
}

html[data-ui-style="glass"] .file-list .file-row:hover,
html[data-ui-style="glass"] .file-list .file-row.alt:hover,
[data-ui-style="glass"] .file-row:hover,
[data-ui-style="glass"] .file-row.alt:hover {
  background: transparent !important;
  background-color: transparent !important;
  outline: 2px solid rgba(255, 255, 255, 0.3);
  outline-offset: -2px;
}

html[data-ui-style="glass"] .file-list .file-item-icon:hover,
[data-ui-style="glass"] .file-item-icon:hover {
  background: transparent !important;
  background-color: transparent !important;
  outline: 2px solid rgba(255, 255, 255, 0.3);
  outline-offset: -2px;
}

html[data-ui-style="glass"] .file-list .file-row.selected,
html[data-ui-style="glass"] .file-list .file-row.alt.selected,
[data-ui-style="glass"] .file-row.selected,
[data-ui-style="glass"] .file-row.alt.selected {
  background: rgba(var(--accent-color-rgb, 0, 120, 212), 0.3) !important;
  background-color: rgba(var(--accent-color-rgb, 0, 120, 212), 0.3) !important;
  outline: 2px solid var(--accent-color);
  outline-offset: -2px;
}

html[data-ui-style="glass"] .file-list .file-row.selected:not(:focus-within),
html[data-ui-style="glass"] .file-list .file-row.alt.selected:not(:focus-within),
[data-ui-style="glass"] .file-row.selected:not(:focus-within),
[data-ui-style="glass"] .file-row.alt.selected:not(:focus-within) {
  background: transparent !important;
  background-color: transparent !important;
  outline: 2px solid rgba(255, 255, 255, 0.4);
  outline-offset: -2px;
}

html[data-ui-style="glass"] .file-list .file-item-icon.selected,
[data-ui-style="glass"] .file-item-icon.selected {
  background: rgba(var(--accent-color-rgb, 0, 120, 212), 0.3) !important;
  background-color: rgba(var(--accent-color-rgb, 0, 120, 212), 0.3) !important;
  outline: 2px solid var(--accent-color);
  outline-offset: -2px;
}

html[data-ui-style="glass"] .file-list .file-item-icon.selected:not(:focus-within),
[data-ui-style="glass"] .file-item-icon.selected:not(:focus-within) {
  background: transparent !important;
  background-color: transparent !important;
  outline: 2px solid rgba(255, 255, 255, 0.4);
  outline-offset: -2px;
}
